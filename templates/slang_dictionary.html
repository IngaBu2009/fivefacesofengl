{% extends "base.html" %}

{% block content %}
<div class="dictionary-page">
  <div class="dictionary-header">
    <h1>Slang Dictionary</h1>
    <p class="dictionary-subtitle">Explore slang words from different English-speaking regions. Search, filter, and discover!</p>
  </div>

  <!-- Search and Filter Bar -->
  <div class="dictionary-controls">
    <form method="GET" action="{{ url_for('slang_dictionary') }}" class="search-form">
      <div class="search-input-group">
        <input 
          type="text" 
          name="search" 
          placeholder="Search words or meanings..." 
          value="{{ search_query }}"
          class="search-input"
        >
        <button type="submit" class="search-btn">üîç Search</button>
      </div>
      
      <div class="filter-group">
        <label for="region-filter">Filter by region:</label>
        <select name="region" id="region-filter" class="region-select" onchange="this.form.submit()">
          <option value="all" {% if region_filter == 'all' %}selected{% endif %}>All Regions</option>
          {% for key, name in regions.items() %}
            <option value="{{ key }}" {% if region_filter == key %}selected{% endif %}>{{ name }}</option>
          {% endfor %}
        </select>
      </div>
    </form>

    {% if session.get("user_id") %}
      <a href="{{ url_for('add_slang_word') }}" class="add-word-btn">
        <span>‚ûï Add New Word</span>
      </a>
    {% endif %}
  </div>

  <!-- Words List -->
  <div class="words-grid">
    {% if words %}
      {% for word_item in words %}
        <div class="word-card {% if word_item.is_system %}system-word{% endif %}">
          <div class="word-header">
            <div class="word-title-section">
              <h2 class="word-title">{{ word_item.word }}</h2>
              {% if word_item.is_system %}
                <span class="system-badge">System</span>
              {% endif %}
            </div>
            <div class="word-region">
              <span class="region-badge region-{{ word_item.region }}">{{ regions[word_item.region] }}</span>
            </div>
          </div>

          {% if word_item.part_of_speech %}
            <div class="word-part-of-speech">{{ word_item.part_of_speech }}</div>
          {% endif %}

          <div class="word-meaning">
            <strong>Meaning:</strong>
            <p>{{ word_item.meaning }}</p>
          </div>

          {% if word_item.example %}
            <div class="word-example">
              <strong>Example:</strong>
              <p class="example-text">"{{ word_item.example }}"</p>
            </div>
          {% endif %}

          {% if not word_item.is_system and word_item.user_id == session.get("user_id") %}
            <div class="word-actions">
              <a href="{{ url_for('edit_slang_word', word_id=word_item.id) }}" class="edit-word-btn">Edit</a>
              <form method="POST" action="{{ url_for('delete_slang_word', word_id=word_item.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this word?');">
                <button type="submit" class="delete-word-btn">Delete</button>
              </form>
            </div>
          {% endif %}
        </div>
      {% endfor %}
    {% else %}
      <div class="no-words">
        <p>No words found{% if search_query %} matching "{{ search_query }}"{% endif %}{% if region_filter != 'all' %} in {{ regions[region_filter] }}{% endif %}.</p>
        <p>{% if session.get("user_id") %}<a href="{{ url_for('add_slang_word') }}">Add a new word</a> to get started!{% else %}Log in to add words.{% endif %}</p>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}

